- name: Install specific packages for home computer
  apt: state=latest name={{item}}
  with_items:
    - audacity
    - transmission-gtk
    - mpv
    - nethack-console

# Nethack
- name: Copy nethackrc
  become: no
  file: state=link src={{role_path}}/files/nethackrc path={{ lookup('env','HOME') }}/.nethackrc force=yes
    
#Franz
- name: Clear existing franz directory
  become: no
  file: path={{ lookup('env','HOME') }}/applications/franz state=absent
- name: Recreate franz directory
  become: no
  file: path={{ lookup('env','HOME') }}/applications/franz state=directory
#- name: Download and unpack
  # (use github_releases from ansible 2.2 on)
  # (use unarchive from ansible 2.2 up)
  # https://github.com/meetfranz/franz-app/releases/download/4.0.4/Franz-linux-x64-4.0.4.tgz
  #unarchive: remote_src=yes dest={{ lookup('env','HOME') }}/applications/franz src=https://github.com/meetfranz/franz-app/releases/download/4.0.4/Franz-linux-x64-4.0.4.tgz
- name: Download package
  uri: dest=/tmp/franz.tgz url=https://github.com/meetfranz/franz-app/releases/download/4.0.4/Franz-linux-x64-4.0.4.tgz

- name: Unpack
  become: no
  unarchive: copy=no dest={{ lookup('env','HOME') }}/applications/franz src=/tmp/franz.tgz
- name: Remove package
  file: path=/tmp/franz.tgz state=absent

- name: Link executable to directory in path
  become: no
  file: state=link src={{ lookup('env','HOME') }}/applications/franz/Franz path={{ lookup('env','HOME') }}/bin/franz force=yes
